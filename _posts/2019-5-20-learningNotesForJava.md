---
layout:     post
title:      "Java 学习笔记"
date:       2019-5-20 11:11
author:     "Heng"
header-img: "img/弗雷尔卓德2.jpg"
catalog: true
tags:
    - Java
---

### 普通内部类持有外部类引用的原理
内部类虽然和外部类写在同一个文件中，但是编译完成后，还是生成各自的class文件，内部类通过this访问外部类的成员。
1. 编译器自动为内部类添加一个成员变量（实例化），这个成员变量的类型和外部类的类型相同， 这个成员变量就是指向外部类对象(this)的引用；
2. 编译器自动为内部类的构造方法添加一个参数， 参数的类型是外部类的类型， 在构造方法内部使用这个参数为内部类中添加的成员变量赋值；
3. 在调用内部类的构造函数初始化内部类对象时，会默认传入外部类的引用。

**而对于静态内部类**：
1. 创建静态内部类的时候是不需要讲静态内部类的实例对象绑定到外部类的实例对象上。
2. 静态内部类属于外部类，而不是属于外部类的对象。
3. 只能访问外部类的静态成员变量或者静态方法。
4. 生成静态内部类对象的方式：Outer.Inner inner = new Outer.Inner()。

使用static来修饰一个内部类，则`这个内部类就属于外部类本身，而不属于外部类的某个对象`。称为静态内部类（也可称为类内部类），这样的内部类是类级别的，`static关键字的作用是把类的成员变成类相关，而不是实例相关`

注意： 
1. 非静态内部类中不允许定义静态成员，但是是可以定义静态的成员变量的，只是必须加上final修饰符
2. 外部类的静态成员不可以直接使用非静态内部类 
3. 静态内部类，不能访问外部类的实例成员，只能访问外部类的类成员

---